"use strict";!function(){function e(){var e=window.pageYOffset,t=document.querySelector(".js-parallax"),o=t.childNodes[0],s=t.childNodes[1],n=t.childNodes[2];window.addEventListener("scroll",function(){if(this.innerWidth>600&&this.pageYOffset<750){e=this.pageYOffset;var t={translateYMore:Math.round(e/2),translateYLess:Math.round(e/4),blur:Math.round(e/10),opacityMore:1-Math.floor(e)/200,opacityLess:1-Math.floor(e)/300};o.setAttribute("style","transform:translateY("+t.translateYMore+"%);"),s.setAttribute("style","opacity:"+t.opacityMore+";transform:translate3d(0,0,0) translateY("+t.translateYLess+"%);color:rgba(71,82,82,"+t.opacityMore+");"),n.setAttribute("style","opacity:"+t.opacityLess+";")}})}function t(e,t,o,s){var n={key:"-8KIDsmWFMy7aZUBmrBVmw",message:{from_email:o,to:[{email:"me@ifeature.net",name:"YOUR_RECEIVER_NAME",type:"to"}],subject:"Новое сообщение от "+t,html:s}},a=new XMLHttpRequest;a.open("post","https://mandrillapp.com/api/1.0/messages/send.json"),a.addEventListener("readystatechange",function(){a.readyState===a.DONE&&200===a.status&&console.log("Сообщение отправлено")}),a.send(JSON.stringify(n))}function o(){var e=document.querySelector(".js-modal-show"),o=document.querySelector(".js-modals"),s=o.querySelector(".js-form"),n=s.querySelector("#name"),a=s.querySelector("#email"),l=s.querySelector("#message"),i=o.querySelector(".js-modal-hide"),r={name:localStorage.getItem("name"),email:localStorage.getItem("email")};({name:sessionStorage.getItem("name"),email:sessionStorage.getItem("email"),message:sessionStorage.getItem("message")});n.addEventListener("change",function(){sessionStorage.setItem("name",n.value)}),a.addEventListener("change",function(){sessionStorage.setItem("email",a.value)}),l.addEventListener("change",function(){sessionStorage.setItem("message",l.value)}),e.addEventListener("click",function(){o.classList.add("modals_show"),document.body.classList.add("dimmed"),r.name&&(n.value=r.name,a.focus()),r.email?(a.value=r.email,l.focus()):n.focus()}),i.addEventListener("click",function(){o.classList.remove("modals_show"),document.body.classList.remove("dimmed")}),window.addEventListener("keydown",function(e){27===e.keyCode&&o.classList.contains("modals_show")&&(o.classList.remove("modals_show"),document.body.classList.remove("dimmed"))}),s.addEventListener("submit",function(e){e.preventDefault();var i=n.value,r=a.value,c=l.value;t(s,i,r,c),alert("Спасибо, за проявленный интерес! Отвечу Вам в ближайшее время!"),localStorage.setItem("name",n.value),localStorage.setItem("email",a.value),o.classList.remove("modals_show"),document.body.classList.remove("dimmed"),n.value="",a.value="",l.value=""})}function s(){var e,t,o,s,n,a;e=document,t=document.getElementsByTagName("main")[0],o=e.createElement("div"),s=o.cloneNode(!0),o.classList.add("js-progress-bar"),o.appendChild(s),t.insertBefore(o,t.firstElementChild),addEventListener("scroll",function(){n=e.body.scrollHeight-innerHeight,a=pageYOffset/n*100,s.style.width=a+"%"})}function n(){function e(){function e(){var t;return 0===scrollY?void cancelAnimationFrame(t):(scrollBy(0,-10),void(t=requestAnimationFrame(e)))}requestAnimationFrame(e)}function t(){var e=document.documentElement;(e.clientHeight+scrollY)/e.scrollHeight*100>50?n.classList.toggle("button_hidden",!1):n.classList.toggle("button_hidden",!0)}var o,s=document.getElementsByTagName("main")[0],n=document.createElement("button");n.classList.add("button","button_scroll-top","button_hidden"),s.insertAdjacentElement("beforeend",n),n.addEventListener("click",e),addEventListener("scroll",function(){clearTimeout(o),o=setTimeout(t,50)})}function a(){var e,t=document.getElementsByTagName("main")[0],o=Number.parseInt(getComputedStyle(t).paddingLeft);console.log(o),addEventListener("scroll",function(t){clearTimeout(e),e=setTimeout(function(){console.log(o),console.log(document.elementFromPoint(o,0))},50)}),history.replaceState(null,document.title,document.location.href)}o(),e(),s(),n(),a(),console.log("%cHave a nice day!","color: #3498db; font-size: 16px;")}();
//# sourceMappingURL=maps/common.js.map
